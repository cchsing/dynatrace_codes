{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "$id": "schema_local.json",
    "required": ["name", "version", "type", "entity", "metrics", "metricGroup"],
    "title": "plugin.json top level",
    "properties": {
        "name": {
            "type": "string",
            "minLength": 1,
            "description": "A unique plugin name in Java package format.",
            "pattern": "^custom.(jmx|pmi|python)(\\.[a-zA-Z][a-zA-Z0-9_-]*)+$"
        },
        "version": {
            "type": "string",
            "description": "The plugin version, must be updated whenever the plugin definition is updated.",
            "pattern": "^\\d+.\\d+(.\\d+)?$"
        },
        "type": {
            "type": "string",
            "description": "The plugin type. Currently only python is avilable",
            "enum": ["JMX", "python"]
        },
        "entity": {
            "type": "string",
            "description": "Entity type upon which the plugin is activated",
            "enum": [ "HOST", "PROCESS_GROUP_INSTANCE"]
        },
        "metricGroup": {
            "type": "string",
            "minLength": 1,
            "description": "Metric group is used for grouping custom metrics into a hierarchical namespace where different sources, for example multiple plugins can contribute. Moreover, metric group becomes primary part of metric key. Hence once defined it could not be changed.",
            "pattern": "^(\/?[-a-zA-Z0-9_.]+)+$"
        },
        "processTypes": {
            "type": "array",
            "description": "Type of process that plugin monitors, as defined in the processTypes table below. This serves as an alternative to processTypeNames. The method is kept for compatibility, we recommend to use improved technologies instead.",
            "items": {
                "type": "integer",
                "minimum": 0
            },
            "minItems": 1,
            "uniqueItems": true
        },
        "processTypeNames": {
            "description": "Type of process that plugin monitors, as defined in the processTypes table below. The method is kept for compatibility, we recommend to use improved technologies instead.",
            "$ref": "known_process_types.json",
            "minItems": 1,
            "uniqueItems": true
        },
        "technologies": {
            "description": "Type of technology that plugin monitors, as can be viewed on Technologies overview page.",
            "$ref": "known_technologies.json",
            "minItems": 0,
            "uniqueItems": true
        },
        "metrics": {
            "description": "The section defining metrics; see Metrics section for reference",
            "$ref": "metrics.json"
        },
        "properties": {
            "type": "array",
            "description": "Configuration properties the plugin can accept.",
            "$ref": "properties.json"
        },
        "ui": {
            "description": "This part of the JSON defines how metrics are charted on each Process page.",
            "$ref": "ui.json"
        },
        "configUI": {
            "description": "The configUI section defines the configuration fields that are displayed in the UI.",
            "$ref": "configui.json"
        },
        "source": {
            "description": "Python metadata used by ActiveGate PluginModule python engine",
            "$ref": "source.json"}
    },
  "dependencies": {
    "processTypes": {"not": {"required": ["processTypeNames", "technologies"]}},
    "processTypeNames": {"not": {"required": ["processTypes", "technologies"]}}

  }

}